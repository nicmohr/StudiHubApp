sap.ui.define(["Mosbach/StudiHub/controller/base.controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,s){"use strict";return e.extend("Mosbach.StudiHub.controller.Master",{extendInit:function(){this.oSession=this.getOwnerComponen+
t().getModel("SessionModel");this.getView().setModel(this.oSession,"SessionModel");this.oRouter.getRoute("RouteMasterView").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(){this.getTiles()},onRefresh:function(){this.byId("use+
rSelection").setSelectedButton("__xmlview0--init-button");this.byId("dateRange").setDateValue();this.byId("dateRange").setSecondDateValue();this.byId("searchBar").setValue("");this.getTiles()},onLogoutPress:function(){this.oSession.getData().authed="";th+
is.oSession.getData().email="";this.oSession.getData().myUserId="";this.oSession.getData().myUserType="";this.oSession.getData().password="";this.oRouter.navTo("RouteLoginView");window.location.reload()},getFilter:function(){var e=[];e.push(new t("Userid+
",s.BT,this.oSession.getData().myUserId,this.byId("userSelection").getSelectedKey()));if(this.byId("dateRange").getDateValue()){e.push(new t("Begda",s.BT,this.byId("dateRange").getDateValue(),this.byId("dateRange").getSecondDateValue()))}e.push(new t("Ti+
tle",s.EQ,this.byId("searchBar").getValue()));return e},getTiles:function(){this.getOffers(this.getFilter());this.getCareers(this.getFilter());this.getAccoms(this.getFilter());this.getEvents(this.getFilter());this.getJobs(this.getFilter())},getOffers:fun+
ction(e){var t=this;this.byId("flexBoxOffers").destroyItems();this.oModel.read("/OfferSet",{filters:e,success:function(e,s){if(e){for(var n=0;n<e.results.length;n++){var o=e.results[n];t.generateOfferTile("O"+o.Postid,o.ShortTitle,o.Uname,o.Icon,o.OfferV+
alue,"Bis: "+t.dateFormatter(o.Endda))}}},error:function(e){}})},getCareers:function(e){var t=this;this.byId("flexBoxCareer").destroyItems();this.oModel.read("/CareerSet",{filters:e,success:function(e,s){if(e){for(var n=0;n<e.results.length;n++){var o=e.+
results[n];t.generateCareerTile("C"+o.Postid,o.Title,o.Uname,o.Imgurl,o.Imgtype,t.dateFormatter(o.Endda))}}}})},getAccoms:function(e){var t=this;this.byId("flexBoxAccom").destroyItems();this.oModel.read("/AccomSet",{filters:e,success:function(e,s){if(e){+
for(var n=0;n<e.results.length;n++){var o=e.results[n];t.generateAccommodationTile("A"+o.Postid,o.Title,o.Street,o.Rooms+" Zimmer "+o.Area+"qm",o.Cost,"Bis: "+t.dateFormatter(o.Endda))}}}})},getEvents:function(e){var t=this;this.byId("flexBoxEvent").dest+
royItems();this.oModel.read("/EventSet",{filters:e,success:function(e,s){if(e){for(var n=0;n<e.results.length;n++){var o=e.results[n];t.generateEventTile("E"+o.Postid,o.Title,o.Uname,"Bis: "+t.dateFormatter(o.Endda))}}},error:function(e){}})},getJobs:fun+
ction(e){var t=this;this.byId("flexBoxJob").destroyItems();this.oModel.read("/JobSet",{filters:e,success:function(e,s){if(e){for(var n=0;n<e.results.length;n++){var o=e.results[n];if(o.Wage<=0){o.Wage=" "}else{o.Wage=o.Wage+"/h"}t.generateJobTile("J"+o.P+
ostid,o.Title,o.Uname,o.Wage,"Bis: "+t.dateFormatter(o.Endda))}}},error:function(e){}})},generateOfferTile:function(e,t,s,n,o,a){var i=new sap.m.GenericTile(e);var r=new sap.m.TileContent;var d=this.getTileContent(o,n);i.setHeader(t);i.setSubheader(s);i.+
attachPress(e,this.onOfferPress,this);i.addStyleClass("sapUiTinyMarginBegin");i.addStyleClass("sapUiTinyMarginTop");i.addStyleClass("tileLayout");r.setFooter(a);r.setContent(d);i.addTileContent(r);this.byId("flexBoxOffers").addItem(i)},generateCareerTile+
:function(e,t,s,n,o,a){var i=new sap.m.GenericTile;var r=new sap.m.TileContent;var d=new sap.m.NewsContent;i.addStyleClass("sapUiTinyMarginBegin");i.addStyleClass("sapUiTinyMarginTop");if(o==="SIMG"){i.setHeaderImage(n)}else{i.setBackgroundImage(n)}i.set+
FrameType("TwoByOne");i.attachPress(e,this.onCareerPress,this);r.setFooter(a);d.setContentText(t);d.setSubheader(s);r.setContent(d);i.addTileContent(r);this.byId("flexBoxCareer").addItem(i)},generateAccommodationTile:function(e,t,s,n,o,a){var i=new sap.m+
.GenericTile(e);var r=new sap.m.TileContent;var d=new sap.m.FeedContent;i.addStyleClass("sapUiTinyMarginBegin");i.addStyleClass("sapUiTinyMarginTop");i.setFrameType("TwoByOne");i.attachPress(e,this.onAccomPress,this);i.setHeader(t);r.setFooter(a);d.setVa+
lue(o);d.setSubheader(n);d.setContentText(s);r.setContent(d);i.addTileContent(r);this.byId("flexBoxAccom").addItem(i)},generateEventTile:function(e,t,s,n){var o=new sap.m.GenericTile(e);var a=new sap.m.TileContent;o.addStyleClass("sapUiTinyMarginBegin");+
o.addStyleClass("sapUiTinyMarginTop");o.setFrameType("OneByOne");o.attachPress(e,this.onEventPress,this);o.setHeader(t);o.setSubheader(s);o.setMode("HeaderMode");a.setFooter(n);o.addTileContent(a);this.byId("flexBoxEvent").addItem(o)},generateJobTile:fun+
ction(e,t,s,n,o){var a=new sap.m.GenericTile(e);var i=new sap.m.TileContent;var r=new sap.m.NumericContent;a.setHeader(t);a.setSubheader(s);a.attachPress(e,this.onJobPress,this);a.addStyleClass("sapUiTinyMarginBegin");a.addStyleClass("sapUiTinyMarginTop"+
);a.addStyleClass("tileLayout");i.setFooter(o);r.setValue(n);i.setContent(r);a.addTileContent(i);this.byId("flexBoxJob").addItem(a)},onOfferPress:function(e,t){var s=sap.ui.core.UIComponent.getRouterFor(this);s.navTo("RouteDetailOffer",{ID:t})},onCareerP+
ress:function(e,t){var s=sap.ui.core.UIComponent.getRouterFor(this);s.navTo("RouteDetailCareer",{ID:t})},onAccomPress:function(e,t){var s=sap.ui.core.UIComponent.getRouterFor(this);s.navTo("RouteDetailAccommodation",{ID:t})},onEventPress:function(e,t){va+
r s=sap.ui.core.UIComponent.getRouterFor(this);s.navTo("RouteDetailEvent",{ID:t})},onJobPress:function(e,t){var s=sap.ui.core.UIComponent.getRouterFor(this);s.navTo("RouteDetailJob",{ID:t})},getTileContent:function(e,t){var s;if(e){s=new sap.m.NumericCon+
tent;s.setValue(e);s.setIcon(t);s.setWithMargin(false)}else{s=new sap.m.ImageContent;s.setSrc(t)}return s},pressNewOffer:function(){this.oRouter.navTo("RouteCreateOffer")},pressNewCareer:function(){this.oRouter.navTo("RouteCreateCareer")},pressNewAcomm:f+
unction(){this.oRouter.navTo("RouteCreateAccommodation")},pressNewEvent:function(){this.oRouter.navTo("RouteCreateEvent")},pressNewJob:function(){this.oRouter.navTo("RouteCreateJob")}})});                                                                   