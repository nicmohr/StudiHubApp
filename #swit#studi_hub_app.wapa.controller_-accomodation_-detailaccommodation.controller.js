sap.ui.define(["Mosbach/StudiHub/controller/base.controller","Mosbach/StudiHub/assets/js/maps/MapsClass","sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,t,o,s){"use strict";return e.extend("Mosbach.StudiHub.controller.Accomodation.DetailAccommo+
dation",{extendInit:function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oRouter.getRoute("RouteDetailAccommodation").attachPatternMatched(this._onObjectMatched,this);this.oMaps=new t(this.getView().byId(this.getVisibleMapId()));this.s+
etDeviceModel()},_onObjectMatched:function(e){var t=this;this.postId=e.getParameter("arguments").ID;var o="/AccomSet('"+this.postId.substr(1)+"')";var s;this.oModel.read(o,{success:function(e){s=e.Postcode+", "+e.City+", "+e.Street;t.oMaps.setLocation(e.+
Postcode+", "+e.City+", "+e.Street);t.byId("userProfileButton").bindElement("/UserSet('"+e.Userid+"')")}});this.loadComments();this.getView().bindElement(o)},getVisibleMapId:function(){if(sap.ui.Device.system.desktop===true){return"vbi"}else{return"vbiMo+
bile"}},setDeviceModel:function(){var e=new o(s);e.setDefaultBindingMode("OneWay");this.getView().setModel(e,"device")},loadComments:function(){var e=new sap.m.FeedListItem({sender:"{Title}",icon:"",senderPress:"onSenderPress",iconPress:"onIconPress",ico+
nDensityAware:false,info:"",timestamp:"{Createddate}, {Createdtime}",text:"{Text}",convertLinksToAnchorTags:"All"});this.byId("commentList").bindAggregation("items",{path:"/CommentSet",template:e,filters:[new sap.ui.model.Filter("Postid",sap.ui.model.Fil+
terOperator.EQ,this.postId.substr(1))]})},onEditAccomPress:function(){this.oRouter.navTo("RouteEditAccommodation",{ID:this.postId})},onProfilePress:function(e){var t=e.getSource().getBindingContext().getObject();if(t.Usertype!=="STDT"){this.navToProfile(+
t.Usertype.substr(0,1)+t.Userid)}},onWeblinkPress:function(e){var t=e.getSource().getTooltip();window.open(t,"_blank")},onComment:function(e){var t={Postid:this.postId.substr(1),Userid:this.oSession.getData().myUserId,Createddate:"",Createdtime:"",Text:e+
.getSource().getValue(),Uname:"",Usertype:""};this.oModel.create("/CommentSet",t,{success:function(e,t){},error:function(e){}})}})});                                                                                                                          