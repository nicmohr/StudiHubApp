sap.ui.define(["Mosbach/StudiHub/controller/base.controller","sap/m/MessageToast","sap/m/UploadCollectionParameter"],function(e,t,a){"use strict";return e.extend("Mosbach.StudiHub.controller.Carrer.CreateCareer",{extendInit:function(){this.onLiveChange()+
;this.oRouter.getRoute("RouteCreateCareer").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(){this.byId("panelData").bindElement("/UserSet('"+this.oSession.getData().myUserId+"')");this.byId("inputHeader").setValue("");this.by+
Id("inputCategory").setValue("");this.byId("inputImage").setValue("");this.byId("textArea").setValue("");this.byId("dateRange").setDateValue();this.byId("dateRange").setSecondDateValue();this.byId("UploadCollection").removeAllItems();this.xBinary=""},onL+
iveChange:function(e){var t=this.byId("inputHeader").getValue();var a=this.byId("inputCategory").getValue();var r=this.byId("ImageType").getSelectedKey();var i=this.byId("inputImage").getValue();if(this.byId("dateRange").getSecondDateValue()){var s="Bis:+
 "+this.dateFormatter(this.byId("dateRange").getSecondDateValue())}var n;if(r==="SIMG"){n="HeaderImage"}else{n="BackgroundImage"}this.generateCareerTile(t,a,s,n,i)},generateCareerTile:function(e,t,a,r,i){var s=new sap.m.GenericTile;var n=new sap.m.TileCo+
ntent;var o=new sap.m.NewsContent;s["set"+r](i);s.setFrameType("TwoByOne");n.setFooter(a);o.setContentText(e);o.setSubheader(t);n.setContent(o);s.addTileContent(n);this.byId("flexBoxPreview").destroyItems();this.byId("flexBoxPreview").addItem(s)},getCare+
er:function(){return{Postid:"0",Userid:this.oSession.getData().myUserId,Begda:this.removeTimeZoneOffset(this.byId("dateRange").getDateValue()),Endda:this.removeTimeZoneOffset(this.byId("dateRange").getSecondDateValue()),Title:this.byId("inputHeader").get+
Value(),Category:this.byId("inputCategory").getValue(),Imgtype:this.byId("ImageType").getSelectedKey(),Imgurl:this.byId("inputImage").getValue(),Street:this.byId("inputStreet").getValue(),City:this.byId("inputCity").getValue(),Postcode:this.byId("inputPo+
stcode").getValue(),Descr:this.byId("textArea").getValue(),Weblink:this.byId("inputWebsite").getValue(),Pdfsource:"",Pdfbinary:this.xBinary,Uname:""}},onSavePress:function(){var e=this.getCareer();if(this.fieldsValid(e)){this.saveCareer(e)}},fieldsValid:+
function(e){var a=false;if(!e.Title){this.byId("inputHeader").setValueState("Error");a=true}else{this.byId("inputHeader").setValueState("None")}if(!e.Category){this.byId("inputCategory").setValueState("Error");a=true}else{this.byId("inputCategory").setVa+
lueState("None")}if(!e.Begda||!e.Endda){this.byId("dateRange").setValueState("Error");a=true}else{this.byId("dateRange").setValueState("None")}if(!e.Descr){this.byId("textArea").setValueState("Error");a=true}else{this.byId("textArea").setValueState("None+
")}if(a){t.show("Bitte f√ºlle alle Pflichtfelder aus!")}return!a},saveCareer:function(e){var a=this;var r;this.oModel.create("/CareerSet",e,{success:function(e,i){t.show("Karriereangebot erfolgreich angelegt!");r=e.Postid;setTimeout(function(){a.oRouter.n+
avTo("RouteDetailCareer",{ID:"K"+r})},1500)},error:function(){t.show("Fehler beim Speichern des Karriereangebots!")}})},onFileSelected:function(e){var t=e.getSource();t.removeAllItems();var r=new a({name:"x-csrf-token",value:this.oModel.getSecurityToken(+
)});t.addHeaderParameter(r);this.saveFileTemporary(e.getParameter("files")[0])},saveFileTemporary:function(e){var t;var a=new FileReader;var r=this;a.onload=function(e){var a=e.target.result;var i;if(btoa(a)){i=btoa(a)}else{i=btoa(encodeURIComponent(a))}+
if(typeof base64file==="undefined"||typeof base64file===null){t=i}else{t=t+"new"+i}r.xBinary=t};a.readAsBinaryString(e)}})});                                                                                                                                  